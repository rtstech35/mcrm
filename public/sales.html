<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="theme-color" content="#28a745">
    <title>SatÄ±ÅŸ Paneli - Saha CRM</title>
    <link rel="stylesheet" href="/theme.css">
    <link rel="stylesheet" href="/mobile.css">

</head>
<body>


    <div class="container" style="min-height: 100vh; padding-top: 2rem;">
        <div class="sidebar" style="position: relative;">
            <div style="text-align: center; margin-bottom: 2rem;">
                <h2 style="color: white; font-weight: 600; margin-bottom: 0.5rem;">Saha CRM</h2>
                <p style="color: rgba(255,255,255,0.7); font-size: 0.875rem;">SatÄ±ÅŸ Paneli</p>
            </div>
            
            <h3>MenÃ¼</h3>
            <ul style="list-style: none; padding: 0;">
                <li><a href="#" onclick="showDashboard()">ğŸ“Š Dashboard</a></li>
                <li><a href="#" onclick="showCustomers()">ğŸ¢ MÃ¼ÅŸteriler</a></li>
                <li><a href="#" onclick="showOrders()">ğŸ“‹ SipariÅŸler</a></li>
                <li><a href="#" onclick="showDeliveryNotes()">ğŸ“‹ Ä°rsaliyeler</a></li>
                <li><a href="#" onclick="showAppointments()">ğŸ“… Randevular</a></li>
                <li><a href="#" onclick="showAccounting()">ğŸ’° Cari Hesap</a></li>
                <li><a href="/map.html">ğŸ—ºï¸ Harita</a></li>
                <li><a href="#" onclick="logout()" style="margin-top: 2rem; color: rgba(255,255,255,0.6);">ğŸšº Ã‡Ä±kÄ±ÅŸ</a></li>
            </ul>
        </div>

        <div class="content" id="content" style="margin-left: 280px; padding: 1rem;">
            <div class="card">
                <h2>SatÄ±ÅŸ Dashboard</h2>
                <p>SatÄ±ÅŸ paneline hoÅŸ geldiniz!</p>
            </div>
        </div>
    </div>

    <!-- SipariÅŸ Modal -->
    <div id="orderModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('orderModal')">&times;</span>
            <h3>Yeni SipariÅŸ</h3>
            <form id="orderForm">
                <div class="form-group">
                    <label>MÃ¼ÅŸteri:</label>
                    <select id="order_customer_id" required></select>
                </div>
                <div class="form-group">
                    <label>SipariÅŸ Tarihi:</label>
                    <input type="date" id="order_date" required>
                </div>
                <div class="form-group">
                    <label>Teslimat Tarihi:</label>
                    <input type="date" id="delivery_date">
                </div>
                <div class="form-group">
                    <label>Ã–deme Vadesi:</label>
                    <input type="date" id="payment_due_date">
                </div>
                <div class="form-group">
                    <label>Toplam Tutar:</label>
                    <input type="number" id="total_amount" step="0.01" required>
                </div>
                <div class="form-group">
                    <label>Notlar:</label>
                    <textarea id="order_notes" rows="3"></textarea>
                </div>
                <button type="submit" class="btn">SipariÅŸ OluÅŸtur</button>
            </form>
        </div>
    </div>

    <!-- Ziyaret Modal -->
    <div id="visitModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('visitModal')">&times;</span>
            <h3>MÃ¼ÅŸteri Ziyareti</h3>
            <form id="visitForm">
                <div class="form-group">
                    <label>MÃ¼ÅŸteri:</label>
                    <select id="customer_id" required></select>
                </div>
                <div class="form-group">
                    <label>Ziyaret Tipi:</label>
                    <select id="visit_type" required>
                        <option value="visit">Ziyaret</option>
                        <option value="call">Telefon</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>SonuÃ§:</label>
                    <select id="result" required>
                        <option value="sale">SatÄ±ÅŸ YapÄ±ldÄ±</option>
                        <option value="potential">Potansiyel</option>
                        <option value="not_interested">Ä°lgilenmiyor</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Notlar:</label>
                    <textarea id="notes" rows="3"></textarea>
                </div>
                <div class="form-group">
                    <label>Sonraki Ä°letiÅŸim Tarihi:</label>
                    <input type="date" id="next_contact_date">
                </div>
                <button type="submit" class="btn">Kaydet</button>
            </form>
        </div>
    </div>

    <!-- Aktivite Detay Modal -->
    <div id="activityDetailModal" class="modal">
        <div class="modal-content" style="max-width: 800px;">
            <span class="close" onclick="closeModal('activityDetailModal')">&times;</span>
            <div id="activityDetailContent">
                <!-- JavaScript ile doldurulacak -->
            </div>
        </div>
    </div>

    <!-- Randevu Planlama Modal -->
    <div id="appointmentModal" class="modal">
        <div class="modal-content" style="max-width: 600px;">
            <span class="close" onclick="closeModal('appointmentModal')">&times;</span>
            <h3>ğŸ“… Yeni Randevu Planla</h3>
            <div style="margin: 1.5rem 0;">
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; margin-bottom: 1rem;">
                    <div>
                        <label>Tarih:</label>
                        <input type="date" id="appointmentDate" style="width: 100%; padding: 0.5rem; border: 1px solid #ddd; border-radius: 4px;">
                    </div>
                    <div>
                        <label>Saat:</label>
                        <input type="time" id="appointmentTime" style="width: 100%; padding: 0.5rem; border: 1px solid #ddd; border-radius: 4px;">
                    </div>
                </div>
                <div style="margin-bottom: 1rem;">
                    <label>Randevu Tipi:</label>
                    <select id="appointmentType" style="width: 100%; padding: 0.5rem; border: 1px solid #ddd; border-radius: 4px;">
                        <option value="visit">Ziyaret</option>
                        <option value="call">Telefon GÃ¶rÃ¼ÅŸmesi</option>
                        <option value="meeting">ToplantÄ±</option>
                    </select>
                </div>
                <div style="margin-bottom: 1rem;">
                    <label>Randevu Notu:</label>
                    <textarea id="appointmentNote" rows="3" placeholder="Randevu hakkÄ±nda notlar..." style="width: 100%; padding: 0.5rem; border: 1px solid #ddd; border-radius: 4px;"></textarea>
                </div>
                <div style="text-align: center;">
                    <button onclick="saveAppointment()" class="btn btn-success">âœ“ Randevu Kaydet</button>
                    <button onclick="closeModal('appointmentModal')" class="btn" style="background: #6c757d; margin-left: 0.5rem;">Ä°ptal</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        let authToken = localStorage.getItem('authToken');
        let currentUser = JSON.parse(localStorage.getItem('currentUser') || '{}');

        if (!authToken) {
            window.location.href = '/';
        }

        async function apiCall(url, options = {}) {
            const response = await fetch(url, {
                ...options,
                headers: {
                    'Content-Type': 'application/json',
                    'Authorization': `Bearer ${authToken}`,
                    ...options.headers
                }
            });
            
            if (!response.ok) {
                const error = await response.json();
                throw new Error(error.message || 'API hatasÄ±');
            }
            
            return response.json();
        }

        async function showDashboard() {
            try {
                const stats = await apiCall('/api/dashboard/stats');
                const targetsResponse = await apiCall(`/api/targets/user/${currentUser.id}`);
                const targets = targetsResponse.targets || [];
                const salesTarget = targets.find(t => t.target_type === 'sales');
                const visitsTarget = targets.find(t => t.target_type === 'visits');
                
                document.getElementById('content').innerHTML = `
                    <!-- Hedefler ve GerÃ§ekleÅŸmeler -->
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 1rem; margin-bottom: 2rem;">
                        <!-- AylÄ±k SatÄ±ÅŸ Hedefi -->
                        <div class="card" style="margin-bottom: 0;">
                            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
                                <div>
                                    <h3 style="color: #2d3748; font-weight: 600; margin-bottom: 0.5rem;">AylÄ±k SatÄ±ÅŸ Hedefi</h3>
                                    <p style="color: #718096; font-size: 0.875rem;">Hedef: ${salesTarget ? salesTarget.target_value.toLocaleString() : '100,000'} TL</p>
                                </div>
                                <div style="width: 48px; height: 48px; background: linear-gradient(135deg, #667eea, #764ba2); border-radius: 12px; display: flex; align-items: center; justify-content: center; font-size: 1.5rem;">ğŸ’°</div>
                            </div>
                            <div style="margin-bottom: 1rem;">
                                <div style="display: flex; justify-content: space-between; margin-bottom: 0.5rem;">
                                    <span style="font-size: 0.875rem; color: #718096;">GerÃ§ekleÅŸen: 75,000 TL</span>
                                    <span style="font-size: 0.875rem; color: #2d3748; font-weight: 600;">75%</span>
                                </div>
                                <div style="width: 100%; height: 8px; background: #e2e8f0; border-radius: 4px; overflow: hidden;">
                                    <div style="width: 75%; height: 100%; background: linear-gradient(90deg, #667eea, #764ba2); transition: width 0.3s ease;"></div>
                                </div>
                            </div>
                            <div style="font-size: 0.875rem; color: #48bb78;">Kalan: 25,000 TL</div>
                        </div>
                        
                        <!-- AylÄ±k Ziyaret Hedefi -->
                        <div class="card" style="margin-bottom: 0;">
                            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
                                <div>
                                    <h3 style="color: #2d3748; font-weight: 600; margin-bottom: 0.5rem;">AylÄ±k Ziyaret Hedefi</h3>
                                    <p style="color: #718096; font-size: 0.875rem;">Hedef: ${visitsTarget ? visitsTarget.target_value : '30'} ziyaret</p>
                                </div>
                                <div style="width: 48px; height: 48px; background: linear-gradient(135deg, #48bb78, #38a169); border-radius: 12px; display: flex; align-items: center; justify-content: center; font-size: 1.5rem;">ğŸ¯</div>
                            </div>
                            <div style="margin-bottom: 1rem;">
                                <div style="display: flex; justify-content: space-between; margin-bottom: 0.5rem;">
                                    <span style="font-size: 0.875rem; color: #718096;">GerÃ§ekleÅŸen: 22 ziyaret</span>
                                    <span style="font-size: 0.875rem; color: #2d3748; font-weight: 600;">73%</span>
                                </div>
                                <div style="width: 100%; height: 8px; background: #e2e8f0; border-radius: 4px; overflow: hidden;">
                                    <div style="width: 73%; height: 100%; background: linear-gradient(90deg, #48bb78, #38a169); transition: width 0.3s ease;"></div>
                                </div>
                            </div>
                            <div style="font-size: 0.875rem; color: #48bb78;">Kalan: 8 ziyaret</div>
                        </div>
                        
                        <!-- AylÄ±k Tahsilat Hedefi -->
                        <div class="card" style="margin-bottom: 0;">
                            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
                                <div>
                                    <h3 style="color: #2d3748; font-weight: 600; margin-bottom: 0.5rem;">AylÄ±k Tahsilat Hedefi</h3>
                                    <p style="color: #718096; font-size: 0.875rem;">Hedef: 90,000 TL</p>
                                </div>
                                <div style="width: 48px; height: 48px; background: linear-gradient(135deg, #ed8936, #dd6b20); border-radius: 12px; display: flex; align-items: center; justify-content: center; font-size: 1.5rem;">ğŸ’³</div>
                            </div>
                            <div style="margin-bottom: 1rem;">
                                <div style="display: flex; justify-content: space-between; margin-bottom: 0.5rem;">
                                    <span style="font-size: 0.875rem; color: #718096;">GerÃ§ekleÅŸen: 68,000 TL</span>
                                    <span style="font-size: 0.875rem; color: #2d3748; font-weight: 600;">76%</span>
                                </div>
                                <div style="width: 100%; height: 8px; background: #e2e8f0; border-radius: 4px; overflow: hidden;">
                                    <div style="width: 76%; height: 100%; background: linear-gradient(90deg, #ed8936, #dd6b20); transition: width 0.3s ease;"></div>
                                </div>
                            </div>
                            <div style="font-size: 0.875rem; color: #ed8936;">Kalan: 22,000 TL</div>
                        </div>
                    </div>
                    
                    <!-- BugÃ¼nkÃ¼ Randevular -->
                    <div class="card" style="margin-bottom: 1rem;">
                        <h3 style="color: #2d3748; font-weight: 600; margin-bottom: 1rem;">ğŸ“… BugÃ¼nkÃ¼ Randevular</h3>
                        <div style="display: grid; gap: 0.5rem;">
                            <div style="display: flex; justify-content: space-between; align-items: center; padding: 0.75rem; background: #f8f9fa; border-radius: 6px; border-left: 4px solid #48bb78; flex-wrap: wrap; gap: 0.5rem;">
                                <div>
                                    <strong>09:00 - ABC Restaurant</strong>
                                    <div style="font-size: 0.875rem; color: #666;">SipariÅŸ takibi ve yeni Ã¼rÃ¼n tanÄ±tÄ±mÄ±</div>
                                </div>
                                <button class="btn" style="padding: 0.25rem 0.5rem; font-size: 0.75rem; white-space: nowrap;" onclick="completeAppointment(1)">âœ“ Tamamla</button>
                            </div>
                            <div style="display: flex; justify-content: space-between; align-items: center; padding: 0.75rem; background: #f8f9fa; border-radius: 6px; border-left: 4px solid #ed8936; flex-wrap: wrap; gap: 0.5rem;">
                                <div>
                                    <strong>14:00 - XYZ Cafe</strong>
                                    <div style="font-size: 0.875rem; color: #666;">AylÄ±k sipariÅŸ planlanmasÄ±</div>
                                </div>
                                <button class="btn" style="padding: 0.25rem 0.5rem; font-size: 0.75rem; white-space: nowrap;" onclick="completeAppointment(2)">âœ“ Tamamla</button>
                            </div>
                            <div style="display: flex; justify-content: space-between; align-items: center; padding: 0.75rem; background: #f8f9fa; border-radius: 6px; border-left: 4px solid #9f7aea; flex-wrap: wrap; gap: 0.5rem;">
                                <div>
                                    <strong>16:30 - DEF Otel</strong>
                                    <div style="font-size: 0.875rem; color: #666;">Tahsilat takibi</div>
                                </div>
                                <button class="btn" style="padding: 0.25rem 0.5rem; font-size: 0.75rem; white-space: nowrap;" onclick="completeAppointment(3)">âœ“ Tamamla</button>
                            </div>
                        </div>
                    </div>
                    

                    
                    <!-- SipariÅŸ Durumu ve MÃ¼ÅŸteri HaritasÄ± -->
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 1rem; margin-bottom: 2rem;">
                        <!-- SipariÅŸ Durumu -->
                        <div class="card" style="margin-bottom: 0;">
                            <h3 style="color: #2d3748; font-weight: 600; margin-bottom: 1rem;">ğŸ“‹ SipariÅŸ Durumu</h3>
                            <div style="display: grid; gap: 0.5rem;">
                                <div style="display: flex; justify-content: space-between; padding: 0.5rem; background: #e8f5e8; border-radius: 4px;">
                                    <span>OnaylandÄ±</span>
                                    <strong style="color: #48bb78;">8 sipariÅŸ</strong>
                                </div>
                                <div style="display: flex; justify-content: space-between; padding: 0.5rem; background: #fff3cd; border-radius: 4px;">
                                    <span>HazÄ±rlanÄ±yor</span>
                                    <strong style="color: #ed8936;">5 sipariÅŸ</strong>
                                </div>
                                <div style="display: flex; justify-content: space-between; padding: 0.5rem; background: #d4edda; border-radius: 4px;">
                                    <span>Teslim Edildi</span>
                                    <strong style="color: #155724;">12 sipariÅŸ</strong>
                                </div>
                                <div style="display: flex; justify-content: space-between; padding: 0.5rem; background: #f8d7da; border-radius: 4px;">
                                    <span>Ä°ptal</span>
                                    <strong style="color: #721c24;">2 sipariÅŸ</strong>
                                </div>
                            </div>
                            <button class="btn" onclick="showOrders()" style="width: 100%; margin-top: 1rem;">TÃ¼m SipariÅŸleri GÃ¶rÃ¼ntÃ¼le</button>
                        </div>
                        
                        <!-- MÃ¼ÅŸteri HaritasÄ± -->
                        <div class="card" style="margin-bottom: 0;">
                            <h3 style="color: #2d3748; font-weight: 600; margin-bottom: 1rem;">ğŸ—ºï¸ MÃ¼ÅŸteri HaritasÄ±</h3>
                            <div style="height: 200px; background: #f8f9fa; border-radius: 8px; display: flex; align-items: center; justify-content: center; margin-bottom: 1rem;">
                                <div style="text-align: center; color: #666;">
                                    <div style="font-size: 3rem; margin-bottom: 0.5rem;">ğŸ—ºï¸</div>
                                    <div>YakÄ±ndaki mÃ¼ÅŸteriler</div>
                                    <div style="font-size: 0.875rem;">5 km Ã§evrede 12 mÃ¼ÅŸteri</div>
                                </div>
                            </div>
                            <button class="btn" onclick="window.location.href='/map.html'" style="width: 100%;">HaritayÄ± AÃ§</button>
                        </div>
                    </div>
                `;
                
                // Grafikleri Ã§iz
                setTimeout(() => {
                    drawSalesChart();
                    drawVisitChart();
                }, 100);
                
            } catch (error) {
                console.error('Dashboard yÃ¼klenemedi:', error);
                showDashboardFallback();
            }
        }
        
        function showDashboardFallback() {
            document.getElementById('content').innerHTML = `
                <div class="card">
                    <h2>SatÄ±ÅŸ Dashboard</h2>
                    <p>HoÅŸ geldiniz, ${currentUser.full_name}</p>
                    <div style="margin-top: 2rem;">
                        <button class="btn" onclick="window.location.href='/order-detail.html'">ğŸ“ Yeni SipariÅŸ</button>
                    </div>
                </div>
            `;
        }

        async function showVisit() {
            try {
                const customersResponse = await apiCall('/api/customers');
                const customers = customersResponse.customers || [];
                
                document.getElementById('content').innerHTML = `
                    <div class="card">
                        <h2>MÃ¼ÅŸteri Ziyaret</h2>
                        <button class="btn" onclick="openVisitModal()">Yeni Ziyaret KaydÄ±</button>
                        
                        <h3 style="margin-top: 2rem;">YakÄ±ndaki MÃ¼ÅŸteriler</h3>
                        <div id="nearbyCustomers">
                            ${customers.map(customer => `
                                <div class="customer-card" onclick="selectCustomer(${customer.id})">
                                    <h4>${customer.company_name}</h4>
                                    <p>Yetkili: ${customer.contact_person || '-'}</p>
                                    <p>Telefon: ${customer.phone || '-'}</p>
                                    <p>Durum: ${customer.customer_status}</p>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                `;
            } catch (error) {
                console.error('Ziyaret sayfasÄ± yÃ¼klenemedi:', error);
            }
        }

        async function showCustomers() {
            try {
                const customersResponse = await apiCall('/api/customers');
                const customers = customersResponse.customers || [];
                
                let html = `
                    <div class="card">
                        <h2>MÃ¼ÅŸterilerim</h2>
                        <div style="display: grid; gap: 1rem;">
                `;
                
                customers.forEach(customer => {
                    html += `
                        <div class="customer-card" onclick="viewCustomerDetail(${customer.id})" style="cursor: pointer;">
                            <div style="display: flex; justify-content: space-between; align-items: center;">
                                <div>
                                    <h4>${customer.company_name}</h4>
                                    <p>Yetkili: ${customer.contact_person || '-'}</p>
                                    <p>Telefon: ${customer.phone || '-'}</p>
                                    <p>Durum: ${customer.customer_status}</p>
                                </div>
                                <div>
                                    <button class="btn" onclick="event.stopPropagation(); visitCustomer(${customer.id})">Ziyaret Et</button>
                                </div>
                            </div>
                        </div>
                    `;
                });
                
                html += '</div></div>';
                document.getElementById('content').innerHTML = html;
                
            } catch (error) {
                console.error('MÃ¼ÅŸteriler yÃ¼klenemedi:', error);
            }
        }

        async function showOrders() {
            try {
                const ordersResponse = await apiCall('/api/orders');
                const orders = ordersResponse.orders || [];
                const myOrders = orders.filter(o => o.sales_rep_id == currentUser.id);
                
                let html = `
                    <div class="card">
                        <h2>SipariÅŸlerim</h2>
                        <button class="btn" onclick="openOrderModal()">Yeni SipariÅŸ</button>
                        <table class="table">
                            <thead>
                                <tr>
                                    <th>SipariÅŸ No</th>
                                    <th>MÃ¼ÅŸteri</th>
                                    <th>Tarih</th>
                                    <th>Tutar</th>
                                    <th>Durum</th>
                                </tr>
                            </thead>
                            <tbody>
                `;
                
                myOrders.forEach(order => {
                    html += `
                        <tr>
                            <td>#${order.order_number}</td>
                            <td>${order.customer_name || 'Bilinmiyor'}</td>
                            <td>${new Date(order.order_date).toLocaleDateString('tr-TR')}</td>
                            <td>${order.total_amount} TL</td>
                            <td>${order.status}</td>
                        </tr>
                    `;
                });
                
                html += '</tbody></table></div>';
                document.getElementById('content').innerHTML = html;
                
            } catch (error) {
                console.error('SipariÅŸler yÃ¼klenemedi:', error);
            }
        }

        async function showMap() {
            window.location.href = '/map.html';
        }

        function selectCustomer(customerId) {
            document.querySelectorAll('.customer-card').forEach(card => {
                card.classList.remove('active');
            });
            event.target.closest('.customer-card').classList.add('active');
        }

        function visitCustomer(customerId) {
            openVisitModal();
            document.getElementById('customer_id').value = customerId;
        }
        
        function viewCustomerDetail(customerId) {
            window.location.href = `/customer-detail.html?id=${customerId}`;
        }

        async function openVisitModal() {
            try {
                const customersResponse = await apiCall('/api/customers');
                const customers = customersResponse.customers || [];
                
                const customerSelect = document.getElementById('customer_id');
                customerSelect.innerHTML = '<option value="">MÃ¼ÅŸteri SeÃ§iniz</option>';
                customers.forEach(customer => {
                    customerSelect.innerHTML += `<option value="${customer.id}">${customer.company_name}</option>`;
                });
                
                document.getElementById('visitModal').style.display = 'block';
            } catch (error) {
                alert('MÃ¼ÅŸteriler yÃ¼klenemedi: ' + error.message);
            }
        }

        function closeModal(modalId) {
            document.getElementById(modalId).style.display = 'none';
        }

        async function openOrderModal() {
            try {
                const customersResponse = await apiCall('/api/customers');
                const customers = customersResponse.customers || [];

                const customerSelect = document.getElementById('order_customer_id');
                customerSelect.innerHTML = '<option value="">MÃ¼ÅŸteri SeÃ§iniz</option>';
                customers.forEach(customer => {
                    customerSelect.innerHTML += `<option value="${customer.id}">${customer.company_name}</option>`;
                });
                
                // BugÃ¼nÃ¼n tarihini varsayÄ±lan olarak ayarla
                document.getElementById('order_date').value = new Date().toISOString().split('T')[0];
                
                document.getElementById('orderModal').style.display = 'block';
            } catch (error) {
                alert('MÃ¼ÅŸteriler yÃ¼klenemedi: ' + error.message);
            }
        }
        
        document.getElementById('orderForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            
            const formData = {
                customer_id: document.getElementById('order_customer_id').value,
                order_date: document.getElementById('order_date').value,
                delivery_date: document.getElementById('delivery_date').value,
                payment_due_date: document.getElementById('payment_due_date').value,
                total_amount: document.getElementById('total_amount').value,
                notes: document.getElementById('order_notes').value
            };
            
            try {
                const result = await apiCall('/api/orders', {
                    method: 'POST',
                    body: JSON.stringify(formData)
                });
                
                alert(`SipariÅŸ baÅŸarÄ±yla oluÅŸturuldu! SipariÅŸ No: ${result.order_number}`);
                document.getElementById('orderForm').reset();
                closeModal('orderModal');
                showOrders();
            } catch (error) {
                alert('Hata: ' + error.message);
            }
        });
        
        document.getElementById('visitForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            
            const formData = {
                customer_id: document.getElementById('customer_id').value,
                visit_type: document.getElementById('visit_type').value,
                result: document.getElementById('result').value,
                notes: document.getElementById('notes').value,
                next_contact_date: document.getElementById('next_contact_date').value,
                visit_date: new Date().toISOString()
            };
            
            try {
                await apiCall('/api/visits', {
                    method: 'POST',
                    body: JSON.stringify(formData)
                });
                
                alert('Ziyaret kaydÄ± baÅŸarÄ±yla oluÅŸturuldu!');
                document.getElementById('visitForm').reset();
                closeModal('visitModal');
                showVisit();
            } catch (error) {
                alert('Hata: ' + error.message);
            }
        });

        function drawSalesChart() {
            const canvas = document.getElementById('salesChart');
            if (!canvas) return;
            
            const ctx = canvas.getContext('2d');
            const width = canvas.width;
            const height = canvas.height;
            
            ctx.clearRect(0, 0, width, height);
            
            // Veri
            const months = ['Oca', 'Åub', 'Mar', 'Nis', 'May', 'Haz'];
            const target = [100, 120, 110, 130, 125, 140];
            const actual = [85, 95, 105, 115, 130, 125];
            
            const maxValue = Math.max(...target, ...actual) * 1.1;
            const barWidth = (width - 80) / (months.length * 2.5);
            
            // Grid Ã§izgiler
            ctx.strokeStyle = '#f1f5f9';
            ctx.lineWidth = 1;
            for (let i = 0; i <= 5; i++) {
                const y = 40 + (i * (height - 80) / 5);
                ctx.beginPath();
                ctx.moveTo(40, y);
                ctx.lineTo(width - 20, y);
                ctx.stroke();
            }
            
            months.forEach((month, index) => {
                const x = 60 + (index * 2.5) * barWidth;
                const targetHeight = (target[index] / maxValue) * (height - 80);
                const actualHeight = (actual[index] / maxValue) * (height - 80);
                
                // Hedef bar (daha ince)
                ctx.fillStyle = '#e2e8f0';
                ctx.fillRect(x, height - targetHeight - 40, barWidth * 0.6, targetHeight);
                
                // GerÃ§ekleÅŸen bar (gradient)
                const gradient = ctx.createLinearGradient(0, height - 40, 0, height - actualHeight - 40);
                gradient.addColorStop(0, '#667eea');
                gradient.addColorStop(1, '#764ba2');
                ctx.fillStyle = gradient;
                ctx.fillRect(x, height - actualHeight - 40, barWidth * 0.6, actualHeight);
                
                // Ay etiketi
                ctx.fillStyle = '#718096';
                ctx.font = '12px Poppins';
                ctx.textAlign = 'center';
                ctx.fillText(month, x + barWidth * 0.3, height - 15);
            });
            
            // Legend
            ctx.fillStyle = '#e2e8f0';
            ctx.fillRect(40, 15, 12, 12);
            ctx.fillStyle = '#718096';
            ctx.font = '11px Poppins';
            ctx.textAlign = 'left';
            ctx.fillText('Hedef', 58, 25);
            
            ctx.fillStyle = '#667eea';
            ctx.fillRect(100, 15, 12, 12);
            ctx.fillText('GerÃ§ekleÅŸen', 118, 25);
        }
        
        function drawVisitChart() {
            const canvas = document.getElementById('visitChart');
            if (!canvas) return;
            
            const ctx = canvas.getContext('2d');
            const centerX = canvas.width / 2;
            const centerY = canvas.height / 2 - 10;
            const radius = 70;
            
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            const data = [
                { label: 'BaÅŸarÄ±lÄ±', value: 60, color: '#48bb78' },
                { label: 'Potansiyel', value: 25, color: '#ed8936' },
                { label: 'Olumsuz', value: 15, color: '#f56565' }
            ];
            
            let currentAngle = -Math.PI / 2; // BaÅŸlangÄ±Ã§ Ã¼st nokta
            
            data.forEach((item, index) => {
                const sliceAngle = (item.value / 100) * 2 * Math.PI;
                
                // Gradient oluÅŸtur
                const gradient = ctx.createRadialGradient(centerX, centerY, 0, centerX, centerY, radius);
                gradient.addColorStop(0, item.color);
                gradient.addColorStop(1, item.color + '80');
                
                ctx.beginPath();
                ctx.moveTo(centerX, centerY);
                ctx.arc(centerX, centerY, radius, currentAngle, currentAngle + sliceAngle);
                ctx.closePath();
                ctx.fillStyle = gradient;
                ctx.fill();
                
                // Ã‡ember kenarÄ±
                ctx.strokeStyle = 'white';
                ctx.lineWidth = 2;
                ctx.stroke();
                
                currentAngle += sliceAngle;
            });
            
            // Legend
            let legendY = canvas.height - 60;
            data.forEach((item, index) => {
                ctx.fillStyle = item.color;
                ctx.fillRect(20, legendY + (index * 20), 12, 12);
                
                ctx.fillStyle = '#718096';
                ctx.font = '11px Poppins';
                ctx.textAlign = 'left';
                ctx.fillText(`${item.label} ${item.value}%`, 38, legendY + (index * 20) + 9);
            });
        }
        
        async function showCalendar() {
            document.getElementById('content').innerHTML = `
                <div class="card">
                    <h2>ğŸ“… Takvim ve Aktiviteler</h2>
                    
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 2rem; margin-bottom: 2rem;">
                        <!-- BugÃ¼nkÃ¼ Aktiviteler -->
                        <div style="background: #f8f9fa; padding: 1.5rem; border-radius: 8px;">
                            <h3 style="color: #2d3748; margin-bottom: 1rem;">ğŸ“… BugÃ¼nkÃ¼ Aktiviteler</h3>
                            <div id="todayActivities">
                                <div onclick="showActivityDetail(1)" style="border-left: 4px solid #48bb78; padding: 0.5rem 1rem; margin: 0.5rem 0; background: white; border-radius: 4px; cursor: pointer;" onmouseover="this.style.background='#f0f8ff'" onmouseout="this.style.background='white'">
                                    <strong>09:00</strong> - ABC Restaurant ziyareti
                                    <div style="font-size: 0.875rem; color: #666;">SipariÅŸ takibi</div>
                                </div>
                                <div onclick="showActivityDetail(2)" style="border-left: 4px solid #ed8936; padding: 0.5rem 1rem; margin: 0.5rem 0; background: white; border-radius: 4px; cursor: pointer;" onmouseover="this.style.background='#f0f8ff'" onmouseout="this.style.background='white'">
                                    <strong>14:00</strong> - XYZ Cafe randevusu
                                    <div style="font-size: 0.875rem; color: #666;">Yeni Ã¼rÃ¼n tanÄ±tÄ±mÄ±</div>
                                </div>
                                <div onclick="showActivityDetail(3)" style="border-left: 4px solid #f56565; padding: 0.5rem 1rem; margin: 0.5rem 0; background: white; border-radius: 4px; cursor: pointer;" onmouseover="this.style.background='#f0f8ff'" onmouseout="this.style.background='white'">
                                    <strong>16:30</strong> - DEF Otel telefon gÃ¶rÃ¼ÅŸmesi
                                    <div style="font-size: 0.875rem; color: #666;">Tahsilat takibi</div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Bu Hafta PlanlÄ± -->
                        <div style="background: #f8f9fa; padding: 1.5rem; border-radius: 8px;">
                            <h3 style="color: #2d3748; margin-bottom: 1rem;">ğŸ“† Bu Hafta PlanlÄ±</h3>
                            <div id="weekActivities">
                                <div onclick="showActivityDetail(4)" style="border-left: 4px solid #42A5F5; padding: 0.5rem 1rem; margin: 0.5rem 0; background: white; border-radius: 4px; cursor: pointer;" onmouseover="this.style.background='#f0f8ff'" onmouseout="this.style.background='white'">
                                    <strong>YarÄ±n 10:00</strong> - GHI Market
                                    <div style="font-size: 0.875rem; color: #666;">AylÄ±k sipariÅŸ planlamasÄ±</div>
                                </div>
                                <div onclick="showActivityDetail(5)" style="border-left: 4px solid #9f7aea; padding: 0.5rem 1rem; margin: 0.5rem 0; background: white; border-radius: 4px; cursor: pointer;" onmouseover="this.style.background='#f0f8ff'" onmouseout="this.style.background='white'">
                                    <strong>PerÅŸembe 15:00</strong> - JKL Restaurant
                                    <div style="font-size: 0.875rem; color: #666;">Yeni mÃ¼ÅŸteri ziyareti</div>
                                </div>
                                <div onclick="showActivityDetail(6)" style="border-left: 4px solid #48bb78; padding: 0.5rem 1rem; margin: 0.5rem 0; background: white; border-radius: 4px; cursor: pointer;" onmouseover="this.style.background='#f0f8ff'" onmouseout="this.style.background='white'">
                                    <strong>Cuma 11:00</strong> - MNO Cafe
                                    <div style="font-size: 0.875rem; color: #666;">SipariÅŸ teslim takibi</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Yeni Aktivite Ekleme -->
                    <div style="background: white; border: 2px dashed #e2e8f0; padding: 2rem; border-radius: 8px; text-align: center;">
                        <h3 style="color: #2d3748; margin-bottom: 1rem;">â• Yeni Aktivite Ekle</h3>
                        <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 1rem; align-items: end;">
                            <div>
                                <label>Tarih:</label>
                                <input type="date" id="activityDate" style="width: 100%; padding: 0.5rem; border: 1px solid #ddd; border-radius: 4px;">
                            </div>
                            <div>
                                <label>Saat:</label>
                                <input type="time" id="activityTime" style="width: 100%; padding: 0.5rem; border: 1px solid #ddd; border-radius: 4px;">
                            </div>
                            <div>
                                <label>MÃ¼ÅŸteri:</label>
                                <select id="activityCustomer" style="width: 100%; padding: 0.5rem; border: 1px solid #ddd; border-radius: 4px;">
                                    <option value="">MÃ¼ÅŸteri SeÃ§iniz</option>
                                    <option value="1">ABC Restaurant</option>
                                    <option value="2">XYZ Cafe</option>
                                    <option value="3">DEF Otel</option>
                                </select>
                            </div>
                            <button onclick="addActivity()" class="btn">â• Ekle</button>
                        </div>
                        <div style="margin-top: 1rem;">
                            <input type="text" id="activityNote" placeholder="Aktivite notu..." style="width: 100%; padding: 0.5rem; border: 1px solid #ddd; border-radius: 4px;">
                        </div>
                    </div>
                </div>
            `;
            
            // BugÃ¼nÃ¼n tarihini varsayÄ±lan olarak ayarla
            document.getElementById('activityDate').value = new Date().toISOString().split('T')[0];
        }
        
        function showActivityDetail(activityId) {
            // Ã–rnek veri - gerÃ§ekte API'den gelecek
            const activities = {
                1: {
                    customer: 'ABC Restaurant',
                    time: '09:00',
                    type: 'Ziyaret',
                    status: 'PlanlÄ±',
                    notes: 'SipariÅŸ takibi yapÄ±lacak',
                    previousVisits: [
                        { date: '2025-08-15', note: 'Yeni Ã¼rÃ¼nler tanÄ±tÄ±ldÄ±, olumlu karÅŸÄ±landÄ±', result: 'Potansiyel' },
                        { date: '2025-08-10', note: '500 TL sipariÅŸ alÄ±ndÄ±', result: 'SatÄ±ÅŸ' },
                        { date: '2025-08-05', note: 'Ä°lk ziyaret, tanÄ±ÅŸma toplantÄ±sÄ±', result: 'Potansiyel' }
                    ]
                },
                2: {
                    customer: 'XYZ Cafe',
                    time: '14:00',
                    type: 'Randevu',
                    status: 'OnaylanmÄ±ÅŸ',
                    notes: 'Yeni Ã¼rÃ¼n tanÄ±tÄ±mÄ± yapÄ±lacak',
                    previousVisits: [
                        { date: '2025-08-12', note: 'Fiyat teklifi verildi, dÃ¼ÅŸÃ¼nÃ¼yor', result: 'Potansiyel' },
                        { date: '2025-08-08', note: 'MÃ¼ÅŸteri ilgili ama karar veremedi', result: 'Potansiyel' }
                    ]
                },
                3: {
                    customer: 'DEF Otel',
                    time: '16:30',
                    type: 'Telefon',
                    status: 'PlanlÄ±',
                    notes: 'Tahsilat takibi yapÄ±lacak',
                    previousVisits: [
                        { date: '2025-08-18', note: '1200 TL sipariÅŸ verildi, Ã¶deme 30 gÃ¼n vade', result: 'SatÄ±ÅŸ' },
                        { date: '2025-08-14', note: 'BÃ¼yÃ¼k sipariÅŸ potansiyeli var', result: 'Potansiyel' }
                    ]
                },
                4: {
                    customer: 'GHI Market',
                    time: 'YarÄ±n 10:00',
                    type: 'Ziyaret',
                    status: 'PlanlÄ±',
                    notes: 'AylÄ±k sipariÅŸ planlamasÄ± yapÄ±lacak',
                    previousVisits: [
                        { date: '2025-08-16', note: '2500 TL bÃ¼yÃ¼k sipariÅŸ alÄ±ndÄ±', result: 'SatÄ±ÅŸ' },
                        { date: '2025-08-10', note: 'AylÄ±k ihtiyaÃ§ belirlendi', result: 'Potansiyel' }
                    ]
                },
                5: {
                    customer: 'JKL Restaurant',
                    time: 'PerÅŸembe 15:00',
                    type: 'Ziyaret',
                    status: 'Yeni MÃ¼ÅŸteri',
                    notes: 'Yeni mÃ¼ÅŸteri ziyareti, tanÄ±tÄ±m yapÄ±lacak',
                    previousVisits: [
                        { date: '2025-08-17', note: 'Ä°lk irtibat kuruldu, ilgili gÃ¶rÃ¼nÃ¼yor', result: 'Potansiyel' }
                    ]
                },
                6: {
                    customer: 'MNO Cafe',
                    time: 'Cuma 11:00',
                    type: 'Takip',
                    status: 'PlanlÄ±',
                    notes: 'SipariÅŸ teslim takibi yapÄ±lacak',
                    previousVisits: [
                        { date: '2025-08-19', note: '800 TL sipariÅŸ verildi, teslim bekliyor', result: 'SatÄ±ÅŸ' },
                        { date: '2025-08-12', note: 'Fiyat listesi verildi', result: 'Potansiyel' }
                    ]
                }
            };
            
            const activity = activities[activityId];
            if (!activity) return;
            
            document.getElementById('activityDetailContent').innerHTML = `
                <h3>ğŸ“… ${activity.customer} - Aktivite DetayÄ±</h3>
                
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 2rem; margin: 1.5rem 0;">
                    <div style="background: #f8f9fa; padding: 1rem; border-radius: 8px;">
                        <h4>BugÃ¼nkÃ¼ Aktivite</h4>
                        <p><strong>Saat:</strong> ${activity.time}</p>
                        <p><strong>Tip:</strong> ${activity.type}</p>
                        <p><strong>Durum:</strong> <span style="color: #48bb78;">${activity.status}</span></p>
                        <p><strong>Not:</strong> ${activity.notes}</p>
                        <button onclick="completeActivity(${activityId})" class="btn btn-success" style="margin-top: 0.5rem;">âœ“ TamamlandÄ± Olarak Ä°ÅŸaretle</button>
                        <div id="completedActions-${activityId}" style="display: none; margin-top: 1rem; padding-top: 1rem; border-top: 1px solid #e2e8f0;">
                            <h5 style="margin-bottom: 0.5rem;">Sonraki AÅŸama:</h5>
                            <button onclick="scheduleNextMeeting(${activityId})" class="btn" style="background: #42A5F5; margin-right: 0.5rem; margin-bottom: 0.5rem;">ğŸ“… Tekrar Randevu</button>
                            <button onclick="createOrder(${activityId})" class="btn" style="background: #48bb78; margin-right: 0.5rem; margin-bottom: 0.5rem;">ğŸ“ SipariÅŸ Yap</button>
                            <button onclick="scheduleCall(${activityId})" class="btn" style="background: #ed8936; margin-right: 0.5rem; margin-bottom: 0.5rem;">ğŸ“ Telefon Planla</button>
                            <button onclick="markAsNotInterested(${activityId})" class="btn" style="background: #f56565; margin-bottom: 0.5rem;">âŒ Ä°lgilenmiyor</button>
                        </div>
                    </div>
                    
                    <div style="background: #f8f9fa; padding: 1rem; border-radius: 8px;">
                        <h4>MÃ¼ÅŸteri Bilgileri</h4>
                        <p><strong>Firma:</strong> ${activity.customer}</p>
                        <p><strong>Son Ziyaret:</strong> ${activity.previousVisits[0].date}</p>
                        <p><strong>Toplam Ziyaret:</strong> ${activity.previousVisits.length} kez</p>
                        <button onclick="viewCustomerDetail(1)" class="btn" style="margin-top: 0.5rem;">ğŸ‘¥ MÃ¼ÅŸteri DetayÄ±</button>
                    </div>
                </div>
                
                <div style="background: white; border: 1px solid #e2e8f0; border-radius: 8px; padding: 1rem;">
                    <h4>ğŸ“ Ã–nceki GÃ¶rÃ¼ÅŸme NotlarÄ±</h4>
                    <div style="max-height: 300px; overflow-y: auto;">
                        ${activity.previousVisits.map(visit => `
                            <div style="border-bottom: 1px solid #f1f5f9; padding: 0.75rem 0;">
                                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.5rem;">
                                    <strong>${new Date(visit.date).toLocaleDateString('tr-TR')}</strong>
                                    <span style="background: ${visit.result === 'SatÄ±ÅŸ' ? '#d4edda' : '#fff3cd'}; color: ${visit.result === 'SatÄ±ÅŸ' ? '#155724' : '#856404'}; padding: 0.25rem 0.5rem; border-radius: 12px; font-size: 0.75rem;">${visit.result}</span>
                                </div>
                                <p style="color: #666; font-size: 0.9rem;">${visit.note}</p>
                            </div>
                        `).join('')}
                    </div>
                </div>
                
                <div style="margin-top: 1rem; text-align: center;">
                    <button onclick="addVisitNote(${activityId})" class="btn">â• Yeni Not Ekle</button>
                    <button onclick="closeModal('activityDetailModal')" class="btn" style="background: #6c757d; margin-left: 0.5rem;">Kapat</button>
                </div>
            `;
            
            document.getElementById('activityDetailModal').style.display = 'block';
        }
        
        function completeActivity(activityId) {
            // TamamlandÄ± butonunu gizle ve aksiyon butonlarÄ±nÄ± gÃ¶ster
            event.target.style.display = 'none';
            document.getElementById(`completedActions-${activityId}`).style.display = 'block';
            alert('Aktivite tamamlandÄ±! Sonraki aÅŸamayÄ± seÃ§in.');
        }
        
        function scheduleNextMeeting(activityId) {
            const date = prompt('Randevu tarihi (YYYY-MM-DD):');
            const time = prompt('Randevu saati (HH:MM):');
            if (date && time) {
                alert(`Yeni randevu planlandÄ±: ${date} ${time}`);
                closeModal('activityDetailModal');
            }
        }
        
        function createOrder(activityId) {
            if (confirm('SipariÅŸ sayfasÄ±na yÃ¶nlendirileceksiniz. Devam etmek istiyor musunuz?')) {
                window.location.href = '/order-detail.html';
            }
        }
        
        function scheduleCall(activityId) {
            const date = prompt('Telefon gÃ¶rÃ¼ÅŸmesi tarihi (YYYY-MM-DD):');
            const time = prompt('Telefon gÃ¶rÃ¼ÅŸmesi saati (HH:MM):');
            if (date && time) {
                alert(`Telefon gÃ¶rÃ¼ÅŸmesi planlandÄ±: ${date} ${time}`);
                closeModal('activityDetailModal');
            }
        }
        
        function markAsNotInterested(activityId) {
            if (confirm('MÃ¼ÅŸteri ilgilenmiyor olarak iÅŸaretlenecek. Emin misiniz?')) {
                alert('MÃ¼ÅŸteri ilgilenmiyor olarak iÅŸaretlendi.');
                closeModal('activityDetailModal');
            }
        }
        
        function addVisitNote(activityId) {
            const note = prompt('Yeni gÃ¶rÃ¼ÅŸme notu:');
            if (note) {
                alert('Not eklendi: ' + note);
                // Burada API'ye kaydet
            }
        }

        function addActivity() {
            const date = document.getElementById('activityDate').value;
            const time = document.getElementById('activityTime').value;
            const customer = document.getElementById('activityCustomer').value;
            const note = document.getElementById('activityNote').value;
            
            if (!date || !time || !customer) {
                alert('LÃ¼tfen tÃ¼m alanlarÄ± doldurun!');
                return;
            }
            
            alert('Aktivite eklendi! (VeritabanÄ± entegrasyonu yapÄ±lacak)');
            
            // Formu temizle
            document.getElementById('activityTime').value = '';
            document.getElementById('activityCustomer').value = '';
            document.getElementById('activityNote').value = '';
        }

        function showDeliveryNotes() {
            document.getElementById('content').innerHTML = `
                <div class="card">
                    <h2>ğŸ“‹ Ä°rsaliyeler</h2>
                    <p>Ä°rsaliye yÃ¶netimi sayfasÄ± geliÅŸtirilecek.</p>
                </div>
            `;
        }
        
        function showAppointments() {
            document.getElementById('content').innerHTML = `
                <div class="card">
                    <h2>ğŸ“… Randevular</h2>
                    <p>Randevu yÃ¶netimi sayfasÄ± geliÅŸtirilecek.</p>
                </div>
            `;
        }
        
        function showAccounting() {
            document.getElementById('content').innerHTML = `
                <div class="card">
                    <h2>ğŸ’° Cari Hesap</h2>
                    <p>Cari hesap yÃ¶netimi sayfasÄ± geliÅŸtirilecek.</p>
                </div>
            `;
        }
        
        function completeAppointment(id) {
            if (confirm('Randevu tamamlandÄ± olarak iÅŸaretlensin mi?')) {
                alert('Randevu tamamlandÄ±!');
                showDashboard();
            }
        }

        function logout() {
            localStorage.removeItem('authToken');
            localStorage.removeItem('currentUser');
            window.location.href = '/';
        }

        function updateUserInfo() {
            const userInfo = document.getElementById('userInfo');
            if (userInfo) {
                userInfo.innerHTML = `
                    <div style="font-size: 1rem; font-weight: 600; margin-bottom: 0.25rem;">SatÄ±ÅŸ Dashboard</div>
                    <div style="font-size: 0.875rem; opacity: 0.9; margin-bottom: 0.5rem;">HoÅŸ geldiniz, ${currentUser.full_name}</div>
                    <div style="font-size: 0.75rem; opacity: 0.8;">
                        ${new Date().toLocaleDateString('tr-TR')} - ${new Date().toLocaleTimeString('tr-TR', {hour: '2-digit', minute: '2-digit'})}
                    </div>
                `;
            }
        }
        
        showDashboard();
        
        setTimeout(() => {
            updateUserInfo();
        }, 100);
        
        setInterval(updateUserInfo, 60000);
    </script>
    <div id="userInfo" style="position: fixed; bottom: 1rem; left: 1rem; background: rgba(40, 167, 69, 0.9); padding: 0.75rem; border-radius: 8px; color: white; box-shadow: 0 4px 12px rgba(0,0,0,0.15); z-index: 1000; min-width: 180px; font-size: 0.875rem;">
        <!-- JavaScript ile doldurulacak -->
    </div>
</body>
</html>
<style>
@media (max-width: 768px) {
    .container {
        flex-direction: column;
    }
    
    .sidebar {
        position: relative !important;
        width: 100% !important;
        height: auto !important;
        order: 2;
        margin-top: 1rem;
    }
    
    .content {
        margin-left: 0 !important;
        padding: 0.5rem !important;
        order: 1;
    }
    
    .card {
        padding: 1rem;
        margin-bottom: 1rem;
    }
    
    .card h2, .card h3 {
        font-size: 1.1rem;
    }
    
    #userInfo {
        position: relative !important;
        bottom: auto !important;
        left: auto !important;
        margin: 1rem 0;
        text-align: center;
    }
}

@media (max-width: 480px) {
    .content {
        padding: 0.25rem !important;
    }
    
    .card {
        padding: 0.75rem;
    }
    
    .btn {
        padding: 0.25rem 0.5rem;
        font-size: 0.75rem;
    }
}
</style>